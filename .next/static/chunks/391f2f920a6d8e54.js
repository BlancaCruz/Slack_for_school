(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2512,e=>{e.v({card:"TaskList-module__oTUpwW__card",cardHeader:"TaskList-module__oTUpwW__cardHeader",container:"TaskList-module__oTUpwW__container",context:"TaskList-module__oTUpwW__context",description:"TaskList-module__oTUpwW__description",dueDate:"TaskList-module__oTUpwW__dueDate",empty:"TaskList-module__oTUpwW__empty",high:"TaskList-module__oTUpwW__high",low:"TaskList-module__oTUpwW__low",meta:"TaskList-module__oTUpwW__meta",overdue:"TaskList-module__oTUpwW__overdue",section:"TaskList-module__oTUpwW__section",sectionTitle:"TaskList-module__oTUpwW__sectionTitle",source:"TaskList-module__oTUpwW__source",status:"TaskList-module__oTUpwW__status",title:"TaskList-module__oTUpwW__title",urgent:"TaskList-module__oTUpwW__urgent"})},67046,e=>{e.v({active:"SanctuaryToggle-module__zTu95W__active",button:"SanctuaryToggle-module__zTu95W__button",container:"SanctuaryToggle-module__zTu95W__container",description:"SanctuaryToggle-module__zTu95W__description",hint:"SanctuaryToggle-module__zTu95W__hint",title:"SanctuaryToggle-module__zTu95W__title"})},23573,e=>{e.v({button:"FlarePanel-module__BhO7pW__button",container:"FlarePanel-module__BhO7pW__container",description:"FlarePanel-module__BhO7pW__description",flareItem:"FlarePanel-module__BhO7pW__flareItem",flareList:"FlarePanel-module__BhO7pW__flareList",flareMessage:"FlarePanel-module__BhO7pW__flareMessage",flareTime:"FlarePanel-module__BhO7pW__flareTime",form:"FlarePanel-module__BhO7pW__form",input:"FlarePanel-module__BhO7pW__input",recent:"FlarePanel-module__BhO7pW__recent",recentTitle:"FlarePanel-module__BhO7pW__recentTitle",title:"FlarePanel-module__BhO7pW__title"})},36061,e=>{e.v({contentLayer:"Dashboard-module__0qHQXq__contentLayer",error:"Dashboard-module__0qHQXq__error",header:"Dashboard-module__0qHQXq__header",hudLayer:"Dashboard-module__0qHQXq__hudLayer",loading:"Dashboard-module__0qHQXq__loading",main:"Dashboard-module__0qHQXq__main",viewport:"Dashboard-module__0qHQXq__viewport"})},81694,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(2512);function l({tasks:e}){if(!e||0===e.length)return(0,a.jsx)("div",{className:s.default.empty,children:(0,a.jsx)("p",{children:"No tasks. You're all caught up! âœ¨"})});let t={URGENT:e.filter(e=>"URGENT"===e.priority),HIGH:e.filter(e=>"HIGH"===e.priority),LOW:e.filter(e=>"LOW"===e.priority)};return(0,a.jsxs)("div",{className:s.default.container,children:[t.URGENT.length>0&&(0,a.jsxs)("section",{className:s.default.section,children:[(0,a.jsx)("h2",{className:`${s.default.sectionTitle} ${s.default.urgent}`,children:"ðŸ”´ URGENT"}),t.URGENT.map(e=>(0,a.jsx)(i,{task:e},e.id))]}),t.HIGH.length>0&&(0,a.jsxs)("section",{className:s.default.section,children:[(0,a.jsx)("h2",{className:`${s.default.sectionTitle} ${s.default.high}`,children:"ðŸ”µ HIGH"}),t.HIGH.map(e=>(0,a.jsx)(i,{task:e},e.id))]}),t.LOW.length>0&&(0,a.jsxs)("section",{className:s.default.section,children:[(0,a.jsx)("h2",{className:`${s.default.sectionTitle} ${s.default.low}`,children:"âšª LOW"}),t.LOW.map(e=>(0,a.jsx)(i,{task:e},e.id))]})]})}function i({task:e}){let t=new Date(e.dueDate),l=t<new Date;return(0,a.jsxs)("div",{className:s.default.card,children:[(0,a.jsxs)("div",{className:s.default.cardHeader,children:[(0,a.jsx)("h3",{className:s.default.title,children:e.title}),(0,a.jsx)("span",{className:s.default.source,children:e.source})]}),(0,a.jsx)("p",{className:s.default.description,children:e.description}),(0,a.jsxs)("div",{className:s.default.meta,children:[(0,a.jsx)("span",{className:s.default.context,children:e.context}),(0,a.jsx)("span",{className:`${s.default.dueDate} ${l?s.default.overdue:""}`,children:t.toLocaleDateString()})]}),(0,a.jsx)("div",{className:s.default.status,children:e.status})]})}var r=e.i(67046);function n({active:e,onChange:s}){let[l,i]=(0,t.useState)(!1),n=(0,t.useRef)(null),o=()=>{i(!0)},d=()=>{i(!1),clearTimeout(n.current)},c=()=>{l&&s(!e)};return(0,a.jsxs)("div",{className:r.default.container,children:[(0,a.jsx)("h3",{className:r.default.title,children:"ðŸ›ï¸ Sanctuary Mode"}),(0,a.jsx)("p",{className:r.default.description,children:e?"Deep work activated. Distractions hidden.":"Enable to blur distractions and focus."}),(0,a.jsx)("button",{className:`${r.default.button} ${e?r.default.active:""}`,onMouseDown:()=>{o(),n.current=setTimeout(()=>{l&&c()},800)},onMouseUp:d,onMouseLeave:d,onTouchStart:()=>{o(),n.current=setTimeout(()=>{l&&c()},800)},onTouchEnd:d,children:e?"âœ“ Active":"Hold to Activate"}),(0,a.jsx)("div",{className:r.default.hint,children:"Hold for 0.8s to toggle"})]})}var o=e.i(23573);function d({onFlare:e,recentFlares:s=[]}){let[l,i]=(0,t.useState)(""),[r,n]=(0,t.useState)(""),d=async a=>{a.preventDefault(),l.trim()&&(await e({userId:"user-"+Date.now(),taskId:r||void 0,message:l,targetAudience:"mentors"}),i(""),n(""))};return(0,a.jsxs)("div",{className:o.default.container,children:[(0,a.jsx)("h3",{className:o.default.title,children:"ðŸš¨ Drop a Flare"}),(0,a.jsx)("p",{className:o.default.description,children:"Signal for help without DM distraction"}),(0,a.jsxs)("form",{onSubmit:d,className:o.default.form,children:[(0,a.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),placeholder:"What do you need help with?",className:o.default.input,rows:"3"}),(0,a.jsx)("button",{type:"submit",className:o.default.button,disabled:!l.trim(),children:"Send Flare ðŸ“¡"})]}),s.length>0&&(0,a.jsxs)("div",{className:o.default.recent,children:[(0,a.jsx)("h4",{className:o.default.recentTitle,children:"Recent Flares"}),(0,a.jsx)("div",{className:o.default.flareList,children:s.map(e=>(0,a.jsxs)("div",{className:o.default.flareItem,children:[(0,a.jsx)("p",{className:o.default.flareMessage,children:e.message}),(0,a.jsx)("span",{className:o.default.flareTime,children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))})]})]})}var c=e.i(36061);function u(){let[e,s]=(0,t.useState)([]),[i,r]=(0,t.useState)([]),[o,u]=(0,t.useState)(!1),[_,m]=(0,t.useState)(!0),[h,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{m(!0);let e=await fetch("/api/tasks");if(!e.ok)throw Error("Failed to fetch tasks");let a=await e.json();s(a.tasks||[])}catch(e){f(e.message)}finally{m(!1)}})()},[]),(0,t.useEffect)(()=>{let e=document.querySelector(".main-viewport");e&&(o?e.classList.add("sanctuary-active"):e.classList.remove("sanctuary-active"))},[o]);let p=async e=>{try{let a=await fetch("/api/flare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Failed to send flare");let t=await a.json();r([t,...i])}catch(e){console.error(e)}};return(0,a.jsxs)("div",{className:`${c.default.viewport} main-viewport`,children:[(0,a.jsxs)("div",{className:`${c.default.contentLayer} content-layer`,children:[(0,a.jsxs)("header",{className:c.default.header,children:[(0,a.jsx)("h1",{children:"ðŸŽ¯ Slack for School HUD"}),(0,a.jsx)("p",{children:"Your focus-first task manager"})]}),(0,a.jsxs)("main",{className:c.default.main,children:[h&&(0,a.jsxs)("div",{className:c.default.error,children:["Error: ",h]}),_?(0,a.jsx)("p",{className:c.default.loading,children:"Loading tasks..."}):(0,a.jsx)(l,{tasks:e})]})]}),(0,a.jsxs)("aside",{className:`${c.default.hudLayer} hud-layer`,children:[(0,a.jsx)(n,{active:o,onChange:u}),(0,a.jsx)(d,{onFlare:p,recentFlares:i.slice(0,3)})]})]})}function _(){let[e,s]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{fetch("/api/health").then(()=>s(!1)).catch(()=>s(!1))},[]),e)?(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,a.jsx)("p",{children:"Loading Sanctuary..."})}):(0,a.jsx)(u,{})}e.s(["default",()=>_],81694)}]);